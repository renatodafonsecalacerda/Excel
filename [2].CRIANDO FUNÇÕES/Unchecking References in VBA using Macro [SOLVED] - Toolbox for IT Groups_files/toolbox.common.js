function LightboxBackground(){var bgDiv=document.createElement("div");bgDiv.setAttribute("id","backgroundDisable");bgDiv.className="popup_lightbox";bgDiv.style.height=document.body.clientHeight+"px";bgDiv.style.width=document.body.clientWidth+"px";bgDiv.style.position="absolute";bgDiv.style.left="0px";bgDiv.style.top="0px";document.body.appendChild(bgDiv);}function UndoLightboxBackground(){var bgDiv=document.getElementById("backgroundDisable");if(bgDiv!=null){document.body.removeChild(bgDiv);}}function addEvent(obj,evType,fn){if(obj.addEventListener){obj.addEventListener(evType,fn,false);return true;}else{if(obj.attachEvent){var r=obj.attachEvent("on"+evType,fn);return r;}else{return false;}}}function SaveForLaterOnSubmit(baseURL,emailID,bookmark,bookmarksource){var email;if(document.getElementById(emailID)){email=document.getElementById(emailID).value;}window.location=baseURL+"home/register/?email="+email+"&bookmark="+bookmark+"&bookmarksource="+bookmarksource;}function SaveForLater(id,itemlocalid,entityid,msgid){$.get("/api/savebookmark.aspx",{entityid:entityid,localid:itemlocalid,parkItemtype:9},function(data){ShowSuccess(msgid);});}function ShowSuccess(controlId){document.getElementById(controlId).style.display="block";setTimeout("document.getElementById('"+controlId+"').style.display = 'none';",10000);}function isMouseLeaveOrEnter(e,handler){if(e.type!="mouseout"&&e.type!="mouseover"){return false;}var reltg=e.relatedTarget?e.relatedTarget:e.type=="mouseout"?e.toElement:e.fromElement;while(reltg&&reltg!=handler){reltg=reltg.parentNode;}return(reltg!=handler);}var currentFeedMenu="";var lastFeedMenu="";function feed_showMenu(itemid){var menu=document.getElementById("menu_"+itemid);if(menu!=null){currentFeedMenu="menu_"+itemid;lastFeedMenu="";menu.style.display="block";}}function feed_hideMenu(itemid,e){e=e||window.event;var menu=document.getElementById("menu_"+itemid);if(!isMouseLeaveOrEnter(e,menu)){return;}if(e.type=="mouseout"){if(menu!=null){lastFeedMenu="menu_"+itemid;}setTimeout("feed_menuWorker()",400);}}function feed_stopShowMenu(itemid){var menu=document.getElementById("menu_"+itemid);if(menu){menu.style.display="none";}}function feed_menuWorker(){if(lastFeedMenu.length>0){var menu=document.getElementById(lastFeedMenu);if(menu!=null){menu.style.display="none";}}}var currentButton=null;function feed_showButton(itemid){feed_showButton(itemid,"");}function feed_showButton(itemid,btnPrefix){if(btnPrefix!=""){var item=document.getElementById(btnPrefix+itemid);if(item!=null){if(item.style.display=="block"){return;}}}var button=document.getElementById("button_"+itemid);var table=document.getElementById("table_"+itemid);if(button!=null&&button.style.display=="none"){if(currentButton!=null&&currentButton!=button){currentButton.style.display="none";}button.style.display="block";if(table!=null){table.style.display="block";}currentButton=button;var menu=document.getElementById(lastFeedMenu);if(menu!=null){menu.style.display="none";}}}function feed_hideButton(itemid,e){e=e||window.event;var theWholePost=document.getElementById("container_"+itemid);if(!isMouseLeaveOrEnter(e,theWholePost)){return;}var button=document.getElementById("button_"+itemid);var table=document.getElementById("table_"+itemid);if(button!=null){button.style.display="none";if(table!=null){table.style.display="none";}}feed_stopShowMenu(itemid);}function feed_Connect(userid,targetid,itemid){$.get("/api/feedController.aspx",{action:"RequestConnection",entityid:userid,targetid:targetid},function(data){feed_showMessage(itemid,data);});}function feed_showMessage(itemid,msg){var message=document.getElementById("message_"+itemid);if(message!=null){message.innerHTML=msg;$("#message_"+itemid).fadeIn("slow");setTimeout("hideMessage('"+itemid+"');",3000);}}function stopDisplay(id){var div=document.getElementById("container_"+id);if(div!=null){div.style.display="none";var exdate=new Date();exdate.setDate(exdate.getDate()+30);document.cookie="feed_hide_"+id+"=no;expires="+exdate.toGMTString();}}function hideMessage(itemid){var message=document.getElementById("message_"+itemid);if(message!=null){$("#message_"+itemid).fadeOut("slow");}}function escapeHTML(str){var div=document.createElement("div");var text=document.createTextNode(str);div.appendChild(text);return div.innerHTML;}function CtahandleNonSignedIn(myUrl,redirect,targetid,ddlId,txtId,trksubprod){var email=CtaGetEmail(ddlId);if(!email){email=$("#"+txtId).val();}if(!CtaEmailIsValid(email)){return false;}var args={action:"RequestConnectionRedirect",redirect:redirect,target:targetid,email:email,myurl:myUrl};if(trksubprod!=undefined){args.trksubprod=trksubprod;}$.get("/api/feedController.aspx",args,function(url){CtaRedirect(url);});}function CtahandleSignedInUserCustom(userid,targetid,ddlId,customType,confirmId){$.get("/api/feedController.aspx",{action:"RequestConnection",entityid:userid,targetid:targetid,email:CtaGetEmail(ddlId),custommessage:customType},function(data){CtashowConfirmation(data,confirmId);});}function CtashowConfirmation(data,elementId){$("#"+elementId).html(data);$("#divJoinGroup").slideUp("normal",function(){$("#divJoinGroupConfirmation").slideDown("normal");});}function CtahideConfirmation(id){$(".uc_netclose").hide(1,function(){$("#"+id).animate({opacity:"hide",height:"hide"},"normal",function(){$("#divJoinGroupConfirmation").hide();});});}function CtaGetEmail(ddlId){if($("#"+ddlId).val()){return $("#"+ddlId).val();}else{return"";}}function CtaRedirect(url){window.location.href=url;}function CtaEmailIsValid(email){var regex=/^[-!#$%&'*+/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+/0-9=?A-Z^_a-z{|}~])*@[a-zA-Z0-9](-?[a-zA-Z0-9])*(\.[a-zA-Z](-?[a-zA-Z0-9])*)+$/;var isValid=regex.test(email);if(!isValid){alert("Please enter a valid e-mail address.");return false;}return true;}function PollVoteBtnClick(divID,sStatusID,pollId,buttonId){return PollVoteBtnClick(divID,sStatusID,pollId,buttonId,true,true);}function PollVoteBtnClick(divID,sStatusID,pollId,buttonId,isCloseVisible){return PollVoteBtnClick(divID,sStatusID,pollId,buttonId,isCloseVisible,false,true);}function PollVoteBtnClick(divID,sStatusID,pollId,buttonId,isCloseVisible,isUserRecognized){return PollVoteBtnClick(divID,sStatusID,pollId,buttonId,isCloseVisible,isUserRecognized,true);}function PollVoteBtnClick(divID,sStatusID,pollId,buttonId,isCloseVisible,isUserRecognized,isShowContainer){var answer=getSelectedPollAnswer("rdoPollAnswer");if(answer.length!=0){$.ajax({url:"/api/vendorpollvote/",type:"POST",data:({answerid:getSelectedPollAnswer("rdoPollAnswer"),pollid:pollId,isclose:isCloseVisible,showcontainer:isShowContainer}),dataType:"html",success:function(msg){if(buttonId!=""){$("#"+buttonId).css("display","none");}else{if(jQuery.browser.msie){var targetDiv=document.getElementById(divID);if(targetDiv!=null){try{targetDiv.innerHTML=msg;}catch(e){$("#"+divID).html(msg);}}}else{$("#"+divID).html(msg);}}if(isUserRecognized.toLowerCase()=="false"){$("#divMemberRegistration").show();}},error:function(){$("#"+sStatusID).html("An internal error has been detected. Please try again later.");}});}else{$("#"+sStatusID).html("Click one of the options to vote.");}}function getSelectedPollAnswer(buttonGroup){var radioButton=document.getElementsByName(buttonGroup);for(i=0;i<radioButton.length;i++){if(radioButton[i].checked){return radioButton[i].value;}}return"";}var _tmplCache={};this.tmpl=function(str,data){var err="";try{var func=_tmplCache[str];if(!func){var strFunc="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+str.replace(/[\r\t\n]/g," ").replace(/'(?=[^#]*#>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<#=(.+?)#>/g,"',$1,'").split("<#").join("');").split("#>").join("p.push('")+"');}return p.join('');";func=new Function("obj",strFunc);_tmplCache[str]=func;}return func(data);}catch(e){err=e.message+e.StackTrace;}return"< # ERROR: "+escapeHTML(err)+" # >";};function PullJobs(keywords,template,dest,chann){$.ajax({url:"/api/jobs",data:{q:keywords,ch:chann},dataType:"json",type:"POST",success:function(result){if(result==null){return;}var s=tmpl($("#"+template).html(),{jobs:result});$("#"+dest).append(s);}});}$(document).ready(function(){setWatermarks();});function setWatermarks(){$(":input[watermark]").each(function(idx,obj){$(obj).focus(function(){$(this).removeClass("watermark");if($(this).val()==$(this).attr("watermark")){$(this).val("");}});$(obj).blur(function(){if($(this).val()==$(this).attr("watermark")||$.trim($(this).val())==""){$(this).val($(this).attr("watermark"));$(this).addClass("watermark");}else{$(this).removeClass("watermark");}});$(obj).blur();});$("form").submit(function(){$.each($(":input[watermark]"),function(key,value){var watermark=$(value).attr("watermark").replace(/\\n/g,"\n");if($(value).val()==watermark){$(value).val("");}$(value).unbind("focus");$(value).unbind("blur");});return true;});}var _overrideSubmit=false;$(document).ready(function(){$("[name=aspnetForm]").bind("keypress",function(e){if(e.which==13&&_overrideSubmit){_overrideSubmit=false;return false;}});function specialClickCheck(x){if(x==null){return;}if(x.is("a")){var keepgoing=true;if(x.attr("onclick")!=null){keepgoing=eval(x.attr("onclick"));}else{if(x.data("events")!=null){var clickEvents=x.data("events").click;if(clickEvents!=null){var clickEvent=null;$.each(clickEvents,function(key,value){clickEvent=value.handler;return false;});if(clickEvent!=null){keepgoing=clickEvent();}}}}if(keepgoing&&x.attr("href")!=null){document.location=x.attr("href");}}else{x.click();}}$("input[defaultButton], select[defaultButton]").keypress(function(e){if(e.which==13){var x=$("#"+$(e.target).attr("defaultButton")).first();specialClickCheck(x);_overrideSubmit=true;}});$("div[defaultButton] input,select").keypress(function(e){if(e.which==13){var x=$("#"+$(e.target).closest("div[defaultButton]").attr("defaultButton")).first();specialClickCheck(x);_overrideSubmit=true;}});});var md=new function(){this.sourceNots=1;this.sourceInbox=2;this.notifierCount;this.notifierDiv;this.inboxCount;this.inboxDiv;this.triggerButton;this.triggerText;this.inboxTriggerButton;this.inboxTriggerText;this.timeout=3000;this.maxtimeout=600000;this.timeoutaccel=1.5;this.items=null;this.inboxItems=null;this.clearedItems=false;this.currentPanel=0;this.icurrentPanel=0;this.notificationsPerPanel=3;this.loadMDNot=function(source){if(source==this.sourceNots){var htt=$("#MDNotTemplate").html();var startAt=(this.notificationsPerPanel*this.currentPanel);var endAt=Math.min(this.items.length,startAt+this.notificationsPerPanel);var prevPanel=Math.max(this.currentPanel-1,-1);var nextPanel=-1;if(this.items.length>this.notificationsPerPanel&&endAt<this.items.length){nextPanel=this.currentPanel+1;}var s=tmpl(htt,{items:this.items,nextPanel:nextPanel,prevPanel:prevPanel,startAt:startAt,endAt:endAt});$("#minidash-notifications-output").html(s);}else{if(source==this.sourceInbox){var htt=$("#MDInboxTemplate").html();var startAt=(this.notificationsPerPanel*this.icurrentPanel);var endAt=Math.min(this.inboxItems.length,startAt+this.notificationsPerPanel);var prevPanel=Math.max(this.icurrentPanel-1,-1);var nextPanel=-1;if(this.inboxItems.length>this.notificationsPerPanel&&endAt<this.inboxItems.length){nextPanel=this.icurrentPanel+1;}var s=tmpl(htt,{items:this.inboxItems,nextPanel:nextPanel,prevPanel:prevPanel,startAt:startAt,endAt:endAt});$("#minidash-inbox-output").html(s);}}};this.clearMDNot=function(){if(this.clearedItems){return;}var timestamp;if(this.items==null||this.items.length==0){timestamp=0;}else{timestamp=this.items[0].Timestamp;}this.clearedItems=true;$.ajax({url:"/api/newsfeed/minidash/markasread/"+timestamp+"/",type:"GET",dataType:"json",cache:false,success:function(response){md.clearedItems=response.result;md.clearNotification(md.sourceNots);}});};this.clearNotification=function(){clearNotification(md.sourceInbox);clearNotification(md.sourceNots);};this.clearNotification=function(source){if(source==md.sourceNots){md.notifierDiv.hide();md.triggerButton.hide();md.triggerText.show();}else{if(source==md.sourceInbox){md.inboxDiv.hide();md.inboxTriggerButton.hide();md.inboxTriggerText.show();}}};this.showTryLater=function(source){if(source==md.sourceNots){$("#minidash-notifications-output").addClass("displaynone");$("#minidash-no-notifications").removeClass("displaynone");}else{if(source==md.sourceInbox){$("#minidash-inbox-output").addClass("displaynone");$("#minidash-inbox-no").removeClass("displaynone");}}};this.hideTryLater=function(source){if(source==md.sourceNots){$("#minidash-notifications-output").removeClass("displaynone");$("#minidash-no-notifications").addClass("displaynone");}else{if(source==md.sourceInbox){$("#minidash-inbox-output").removeClass("displaynone");$("#minidash-inbox-no").addClass("displaynone");}}};this.checkMDNot=function(){$.ajax({url:"/api/newsfeed/minidash/notifications",type:"GET",dataType:"json",cache:false,success:function(response){if(response!=null&&response.result){if(response.notifications!=null&&response.notifications.length>0){md.hideTryLater(md.sourceNots);if(response.newNotifications>0){md.notifierCount.text(response.newNotifications);if(md.notifierDiv.css("display")=="none"){md.notifierDiv.fadeIn("fast");md.triggerText.fadeOut("slow");md.triggerButton.fadeIn("slow");}}else{md.clearNotification(md.sourceNots);md.timeout=Math.min(md.timeout*md.timeoutaccel,md.maxtimeout);setTimeout("md.checkMDNot();",md.timeout);}md.items=response.notifications;md.clearedItems=false;md.loadMDNot(md.sourceNots);}else{md.showTryLater(md.sourceNots);}if(response.inbox!=null&&response.inbox.length>0){md.hideTryLater(md.sourceInbox);md.inboxCount.text(response.totalInvitesAndMessages);if(md.inboxDiv.css("display")=="none"){md.inboxDiv.fadeIn("fast");md.inboxTriggerText.fadeOut("slow");md.inboxTriggerButton.fadeIn("slow");}md.inboxItems=response.inbox;md.loadMDNot(md.sourceInbox);}else{md.clearNotification(md.sourceInbox);md.showTryLater(md.sourceInbox);}}else{if(response.code==1){md.clearNotification();if(response.notifications==null){md.showTryLater(md.sourceNots);}if(response.inbox==null){md.showTryLater(md.sourceInbox);}md.timeout=Math.min(md.timeout*md.timeoutaccel,md.maxtimeout);setTimeout("md.checkMDNot();",md.timeout);}}}});};};this.inviteApiFail="Your response could not be processed at this time.";this.declineInvite=function(id){var result="";$.ajax({url:"/api/invite/1/"+id+"/decline",success:function(response){if(response){if(response.success){result="Invitation successfully declined.";showInviteConfirm(id,result);hideMinidashInvite(id);}else{showInviteConfirm(id,inviteApiFail);}}else{showInviteConfirm(id,inviteApiFail);}},error:function(){showInviteConfirm(id,inviteApiFail);}});};this.acceptInvite=function(id){var result="";$.ajax({url:"/api/invite/1/"+id+"/accept",success:function(response){if(response){if(response.success){result="Invitation successfully accepted.";showInviteConfirm(id,result);hideMinidashInvite(id);}else{showInviteConfirm(id,inviteApiFail);}}else{showInviteConfirm(id,inviteApiFail);}},error:function(){showInviteConfirm(id,inviteApiFail);}});};this.hideMinidashInvite=function(id){var itemcont=$("#minidash-inbox-output [messageid="+id+"]");if(itemcont==null||itemcont.length==0){return;}itemcont.slideUp("fast");};this.showInviteConfirm=function(id,txt){var confirm=$("[confirminviteid="+id+"]");if(confirm==null||confirm.length==0){return;}var confirmTxt=$("[confirminviteid="+id+"] .confirmtxt");if(confirmTxt==null||confirmTxt.length==0){return;}confirm.fadeIn("fast");confirmTxt.html(txt);setTimeout(function(){confirm.fadeOut("slow");},1500);};$(document).ready(function(){md.notifierCount=$("#minidash-notifications span[notifiercount]");md.notifierDiv=$("#minidash-notifications *[notifierdiv]");md.triggerButton=$("#minidash-notifications *[buttonview=true]");md.triggerText=$("#minidash-notifications *[buttonview=false]");md.inboxCount=$("#minidash-alerts span[notifiercount]");md.inboxDiv=$("#minidash-alerts *[notifierdiv]");md.inboxTriggerButton=$("#minidash-alerts *[buttonview=true]");md.inboxTriggerText=$("#minidash-alerts *[buttonview=false]");if(md.notifierCount.length>0){$("#minidash-notifications-output div[mdpageerprev]").live("click",function(){md.currentPanel--;md.loadMDNot(md.sourceNots);});$("#minidash-notifications-output div[mdpageernext]").live("click",function(){md.currentPanel++;md.loadMDNot(md.sourceNots);});$("#minidash-inbox-output div[mdinpageerprev]").live("click",function(){md.icurrentPanel--;md.loadMDNot(md.sourceInbox);});$("#minidash-inbox-output div[mdinpageernext]").live("click",function(){md.icurrentPanel++;md.loadMDNot(md.sourceInbox);});if(md.notifierDiv.css("display")=="none"||md.inboxDiv.css("display")=="none"){setTimeout("md.checkMDNot();",md.timeout);}else{md.checkMDNot();}md.timeout=30000;$("#minidash-notifications *[popupbutton=true]").click(function(){md.clearMDNot();md.currentPanel=0;if(md.items==null||md.items.length==0){return;}md.loadMDNot(md.sourceNots);});}$("#mdouter div[popup=true] *[popupbutton=true]").click(function(){if($(this).closest("div[popup=true]").attr("id")=="minidash-alerts"){SiteCatalystLinkTracking("Minidash:Recognized:InboxAlert");}if($(this).closest("div[popup=true]").attr("id")=="minidash-notifications"){SiteCatalystLinkTracking("Minidash:Recognized:Notificatons");}if($(this).closest("div[popup=true]").attr("id")=="mindash-account"){SiteCatalystLinkTracking("Minidash:Recognized:Account");}if($(this).closest("div[popup=true]").attr("id")=="mindash-newToToolbox"){SiteCatalystLinkTracking("Minidash:UnRecognized:NewToToolbox");}$("#mdouter div[popup=true] *[popuppanel=true],#mdouter div[popup=true] *[popdownbutton=true]").fadeOut("fast");$(this).closest("div[popup=true]").find("*[popuppanel=true],*[popdownbutton=true]").fadeIn("fast");$(document).unbind("mousedown.mdpopup");$(document).bind("mousedown.mdpopup",function(event){if($(event.target).closest("*[popuppanel=true],*[popopbutton=true]").get(0)==null){$("#mdouter div[popup=true] *[popuppanel=true],#mdouter div[popup=true] *[popdownbutton=true]").fadeOut("fast");$(document).unbind("mousedown.mdpopup");}});});$("#mdouter div[popup=true] *[popdownbutton=true]").click(function(){$(this).closest("div[popup=true]").find("*[popuppanel=true],*[popdownbutton=true]").fadeOut("fast");$(document).unbind("mousedown.mdpopup");});$("div[linkoverride]").click(function(){window.location=$("#"+$(this).attr("linkoverride")).attr("href");});});$(document).ready(function(){$("#divmyhometab").mouseenter(function(){$(".nav-myhomepaneldown").show();$(".nav-myhomepanelup").show();});$("#divmyhometab").mouseleave(function(){$(".nav-myhomepaneldown").hide();$(".nav-myhomepanelup").hide();});$("#divtopicstab").mouseenter(function(){$("#nav-topicspanel").show();});$("#divtopicstab").mouseleave(function(){$("#nav-topicspanel").hide();});});function RegisterSubNavMenu(controlID){var subNavLink=$("#"+controlID);subNavLink.mouseover(function(){subNavLink.siblings("div").show();subNavLink.parent("div").addClass("subnav-itemboxhighlight");subNavLink.addClass("subnav-itemwitharrowup");});subNavLink.parent("div").mouseleave(function(event){$(event.currentTarget).children("div").hide();$(event.currentTarget).removeClass("subnav-itemboxhighlight");subNavLink.removeClass("subnav-itemwitharrowup");});}var signin_shown=false;function showSigninBox(){if(isCorpSite){$(window.location).attr("href",signinURL);}else{if(signin_shown){$("#signin").animate({left:"-487px"},200,"linear");$("#lightbox-panel").hide();$("#signin-button").addClass("signin-button");$("#signin-button").removeClass("signin-buttonup");signin_shown=false;$(document).unbind("mousedown.signin");}else{$("#signin").animate({left:"0px"},200,"linear");$("#signin-button").removeClass("signin-button");$("#signin-button").addClass("signin-buttonup");$("#lightbox-panel").show();$(document).unbind("mousedown.signin");$(document).bind("mousedown.signin",function(event){if(signin_shown&&$(event.target).closest("#signin").get(0)==null){showSigninBox();}});signin_shown=true;}}}function doHomePageSignIn(){var u=$("#signin_form_username").val();var p=$("#signin_form_password").val();var keepMe_SignedIn=false;if($("#kmsiCB").attr("checked")){keepMe_SignedIn=true;}if(u==""||p==""){$("#signin_message").html("Username and Password are required");return false;}var r=$(window.location).attr("href");if(r.toLowerCase().indexOf("/home/signout")!=-1){r="";}$.post("/api/signin",{contenttype:"json",username:u,password:p,keepMeSignedIn:keepMe_SignedIn,r:r},function(data,status){if(data.success){$(window.location).attr("href",data.message);}else{$("#signin_message").html("We're sorry there has been an error");}});return false;}function hideSigninMessage(){$("#signin_result").hide();}$(document).ready(function(){$("#signin_form_username, #signin_form_password").keypress(function(ev){if(ev.keyCode==13){doHomePageSignIn();_overrideSubmit=true;}});$("#btnSignIn").click(function(h){doHomePageSignIn();});$(".oidHrefHook").click(function(h){if($("#oidretToPage").attr("checked")){document.location=$(this).attr("href")+"?r="+escape(location);}else{document.location=$(this).attr("href");}h.preventDefault();});});(function($){var isHover=false;var loadingImage=CDNImageURL+"rds/icon-refresh.gif";var badge_mouseOutTimeout=500;var badge_ajaxTimeout=400;$.fn.badge=function(){return this.each(function(index){$(this).mouseover(function(e){isHover=true;var badgeID=$(this).attr("badgeEntityID");var existingElements=$("[popped]");if(existingElements){existingElements.hide();}var offset=$(this).offset();var existingPopup=document.getElementById("userbadge_popup_"+badgeID);if(existingPopup!=null&&existingPopup!="undefined"){var popup=$("#userbadge_popup_"+badgeID).css("top",($(this).position().top+($(this).height()/2)).toString()+"px").css("left",($(this).position().left-5).toString()+"px");popup.show();}else{var popup=$("<div class='badge-outerbox'>").attr("popped","false").attr("id","userbadge_popup_"+badgeID).css("top",($(this).position().top+($(this).height()/2)).toString()+"px").css("left",($(this).position().left-5).toString()+"px").mouseover(function(){isHover=true;$(this).attr("popped","true");}).mouseout(function(){isHover=false;$(this).attr("popped","false");setTimeout(function(){if(!isHover){$("[popped=false]").hide();}},badge_mouseOutTimeout);}).html($("<div class='badge-innerbox'>").attr("id","userbadge_popupcontents_"+badgeID).html($("<img border='0'>").attr({src:loadingImage})).attr("loaded","false")).append($("<div class='badge-bottombox'></div>"));$(this).after(popup);}var badgeContents=$("#userbadge_popupcontents_"+badgeID);if(badgeContents.attr("loaded")!="true"){setTimeout(function(){if(isHover){$.ajax({type:"GET",url:"/api/getBadge/1/",data:{bid:badgeID,type:0},contentType:"application/json; charset=utf-8",dataType:"json",success:function(data){var messageLine="";if(data.userdata.MessageURL!=""){messageLine="<div class='badge-buttons'><a href='"+data.userdata.MessageURL+"&page="+document.location+"' class='link-arrow'>Send a Message</a></div>";}var htmlOut="";if(data.userdata.EmployeeOf.length>0){htmlOut="<div class='spacer-tiny'><div class='spacer-tiny'><a href='"+data.userdata.Link+"' class='badge-link anthracite bold'>"+data.userdata.DisplayName+"</a> ";if(data.userdata.ThirdData.length>0){htmlOut+="<br /><span class='black size11'>"+data.userdata.ThirdData+" at</span>  <a href='"+data.userdata.EmployerURL+"' class='size11 blue'>"+data.userdata.EmployeeOf+"</a>";}else{htmlOut+="<br /><a href='"+data.userdata.EmployerURL+"' class='size11 blue'>"+data.userdata.EmployeeOf+"</a>";}htmlOut+="</div><div class='badge-item'><span class='blue bold'>"+data.userdata.FirstTitle+"</span>"+data.userdata.FirstData+"</div>";htmlOut+="<div class='badge-item'><span class='blue bold'>"+data.userdata.SecondTitle+"</span>"+data.userdata.SecondData+"</div>";htmlOut+="<div class='badge-item'><span class='blue bold'>"+data.userdata.FourthTitle+"</span>"+data.userdata.FourthData+"</div></div>"+messageLine;}else{htmlOut="<div class='spacer-tiny'><div class='spacer-tiny'><a href='"+data.userdata.Link+"' class='badge-link anthracite bold'>"+data.userdata.DisplayName+"</a><br /><span class='black size11'>"+data.userdata.ThirdData+"</span></div><div class='badge-item'><span class='blue bold'>"+data.userdata.FirstTitle+"</span>"+data.userdata.FirstData+"</div><div class='badge-item'><span class='blue bold'>"+data.userdata.SecondTitle+"</span>"+data.userdata.SecondData+"</div><div class='badge-item'><span class='blue bold'>"+data.userdata.FourthTitle+"</span>"+data.userdata.FourthData+"</div></div>"+messageLine;}$("#userbadge_popupcontents_"+badgeID).html(htmlOut).attr("loaded","true");},error:function(data){}});}},badge_ajaxTimeout);}});$(this).mouseout(function(e){isHover=false;setTimeout(function(){if(!isHover){$("[popped=false]").hide();}},badge_mouseOutTimeout);});});};})(jQuery);function doSearchDropDown(){inMenu=true;$("#globalheader_menu").show();}function setInMenu(){inMenu=true;}function hideSearchDropDown(){if(!inMenu){$("#globalheader_menu").hide();}}function leaveMenu(){inMenu=false;setTimeout("hideSearchDropDown()",500);}function setSearchHeader(sender){var action=$(sender).attr("action");var mainArgName=$(sender).attr("mainargumentname");var secArgName=$(sender).attr("additionalargumentname");var secArgValue=$(sender).attr("additionalargumentvalue");if(action){_action=action;}if(mainArgName){_mainArgumentName=mainArgName;}if(secArgName){_additionalArgumentName=secArgName;}if(secArgValue){_additionalArgumentValue=secArgValue;}$("#searchHeaderMainItem").html($(sender).html());inMenu=false;hideSearchDropDown();SetWaterMark($(sender));}function GlobalSearch(){var searchQuery=$("#query").val();var wmValue=$("#query").attr("watermark");if(jQuery.trim(searchQuery)==""||jQuery.trim(searchQuery)==wmValue){alert("Please enter a search term.");return;}else{searchQuery=escape(searchQuery);}if(_additionalArgumentName&&_additionalArgumentName!=""){searchQuery=searchQuery+"&"+_additionalArgumentName+"="+_additionalArgumentValue;}window.location=_action+"?"+_mainArgumentName+"="+searchQuery;}function SetWaterMark(sender){var SelectedFilterText=sender.html();var wmSearchPrefix="";if(sender.attr("searchprefix")!=null){wmSearchPrefix=sender.attr("searchprefix");}if(currentWatermark!=$("#query").val()){GlobalSearch();return;}else{$("#query").val(wmSearchPrefix+SelectedFilterText);$("#query").attr("watermark",wmSearchPrefix+SelectedFilterText);$("#query").addClass("nav-searchtextbox watermark");currentWatermark=wmSearchPrefix+SelectedFilterText;}}$(document).ready(function(){try{onJQueryLoad();}catch(e){}});function InitCodeHighlighting(imageURL,verticalURL){$(document).ready(function(){if($("code").length>0){var highlight=function(){HighlightCode(imageURL,verticalURL);};setTimeout(highlight,1);}});}function HighlightCode(imageURL,verticalURL){if(!$.browser.msie||($.browser.msie&&$.browser.version!="6.0")){$("head").append("<link>");css=$("head").children(":last");css.attr({rel:"stylesheet",type:"text/css",href:imageURL+"rds/vs.css"});$.getScript(verticalURL+"/js/highlight.pack.js",function(){$("code").each(function(i,e){e=$(e);if(e.parent("pre").length==0){e.wrap("<pre>");}});$("pre code").each(function(i,e){hljs.highlightBlock(e,"    ");});$("code").mouseover(function(){if($(this).children("[codepopup]").length==0){var maxWidth=($("#content").width()+($("#content").offset().left-0))-$(this).position().left-10;var codeText=$(this).parent("pre").html().replace(/<code.*?>|<\/code>/gi,"");$(this).prepend("<div codepopup='1' class='codepopup' style='height:"+$(this).height()+"px;max-width:"+maxWidth+"px;min-width:"+$(this).width()+"px'>"+codeText+"</div>");}else{$(this).children("[codepopup]").show();}}).mouseleave(function(){$(this).children("[codepopup]").hide();});});}}$(document).ready(function(){$("[hpx]").click(function(){var elemVal=$(this).attr("hpx");SiteCatalystLinkTracking(elemVal);});});function SiteCatalystLinkTracking(linkName){var s=s_gi(s_account);s.linkTrackVars="prop22,eVar22,events";s.linkTrackEvents="event3";s.eVar22=linkName;s.prop22=linkName;s.events="event3";s.tl(this,"o",linkName);}function SCImpressionTracking(itemTitle){var s=s_gi(s_account);s.linkTrackVars="prop10";s.linkTrackEvents="None";s.prop10=itemTitle;s.tl(this,"o",itemTitle);}$(document).ready(function(){$(".badgePopup").badge();});var lazyLoadBuffer=50;var lazyObjects;$(document).ready(function(){lazyObjects=$("[lazysource]");$(window).scroll(CheckUserImageScroll);$(window).scroll();});function CheckUserImageScroll(){var deletecount=0;$(lazyObjects).each(function(i){var pos=$(this).position();if(pos.top>$(window).scrollTop()-lazyLoadBuffer&&pos.top<$(window).scrollTop()+$(window).height()+lazyLoadBuffer){$(this).attr("style","background:url('"+$(this).attr("lazysource")+"') center center;"+$(this).attr("style")).removeAttr("lazysource");lazyObjects.splice(i-deletecount++,1);}});if(lazyObjects.length==0){$(window).unbind("scroll",CheckUserImageScroll);}}function toggleNode(targetId){var t=$("[parentid="+targetId+"]");var c=$("[nodeid="+targetId+"]");if(typeof t!="undefined"){if(t.css("display")=="none"){t.css("display","");c.attr("class","contract");}else{t.css("display","none");c.attr("class","expand");}}}function checkProfileValidWorker(name){$.ajax({type:"POST",url:"/api/home/register/username/1/",data:"name="+name,dataType:"json",success:function(msg){handleUserNameAvailResult(msg);}});}function handleUserNameAvailResult(result){if(!result){getSuggestedProfileNames();}else{$("#ProfileInUseErrorMessage").hide();}}function handleSuggestedProfileNames(result,context){var namebox=document.getElementById("availableUserNames");if(namebox!=null){var msg=null;var names=result.toString().split(",");msg='<div class="register_profilemessage"><b>Sorry, that name is taken.</b><br>';if(result.length>0){msg+="Some suggestions:";}msg+="</div>";var nm=$("#availableUserNames");nm.html(msg);for(var i=0;i<names.length;i++){nm.html(nm.html()+'<div class="register_profileNameSuggest" onclick="javascript:populateProfileName(\''+names[i]+"');\">"+names[i]+"</div>");}namebox.style.display="block";}}function hideProfileNameSuggestBox(){var profileBox=document.getElementById("availableUserNames");if(profileBox!=null){profileBox.style.display="none";}}function isEmpty(elem){return $(elem).val()==""||$(elem).val()==$(elem).attr("watermark");}var loadingFlag=false;function loading(){loadingFlag=true;$("#reg-loading").css("display","block");$("#register-buttonbox .button-outerblue").addClass("button-outergray");$("#register-buttonbox .button-outerblue").removeClass("button-outerblue");$("#register-buttonbox .button-innerblue").addClass("button-innergray");$("#register-buttonbox .button-innerblue").removeClass("button-innerblue");}function notLoading(){loadingFlag=false;$("#reg-loading").css("display","none");$("#register-buttonbox .button-outergray").addClass("button-outerblue");$("#register-buttonbox .button-outergray").removeClass("button-outergray");$("#register-buttonbox .button-innergray").addClass("button-innerblue");$("#register-buttonbox .button-innergray").removeClass("button-innergray");}var subProductOverride=0;function getSubProductOverride(){return subProductOverride;}function setSubProductOverride(subProduct){subProductOverride=subProduct;}function getMailFrequency(){var result="mail";$("[name=mailfrequency]").each(function(index,value){if(value.checked){result=value.value;}});return result;}function handleProcessFail(fail){notLoading();return false;}function Register(){validate();setWatermarks();return false;}function checkProfileValid(){if(profileNameClientId.length>0){if($("#"+profileNameClientId).val()!=$("#"+profileNameClientId).attr("watermark")){var profileName=document.getElementById(profileNameClientId);if(profileName.value.length>0){checkProfileValidWorker(profileName.value);}else{$("#ProfileInUseErrorMessage").hide();}}}}function handleEmailAvailResult(result){if(result){$("#"+validationSummaryClientId+",#"+emailDuplicateMessageClientId).hide();if($("#errorListUL").children().size()==1){$("#"+validationSummaryClientId).hide();}}else{try{var emailAddress=$("#"+emailClientId).val();if(emailAddress!=""){var signInLink=$("#"+emailDuplicateMessageClientId).children("a:first").attr("href");signInLink+=emailAddress;$("#"+emailDuplicateMessageClientId).children("a:first").attr("href",signInLink);}}catch(e){}$("#"+validationSummaryClientId+",#"+emailDuplicateMessageClientId).show();}}function getSuggestedProfileNames(){var sFname;var sLname;var sEmail;if(fnameboxId.length>0){sFname=$("#"+fnameboxId);}if(lnameboxId.length>0){sLname=$("#"+lnameboxId);}if(emailClientId.length>0){sEmail=$("#"+emailClientId);}if(sFname!=null&&sLname!=null&&sFname.length>0&&sLname.length>0&&sFname.val().length>0&&sLname.val().length>0){$.ajax({type:"POST",url:"/api/home/register/namerecommend/1/",data:"firstname="+sFname.val()+"&lastname="+sLname.val(),dataType:"json",success:function(msg){handleSuggestedProfileNames(msg,null);}});}else{if(sEmail!=null&&sEmail.length>0&&sEmail.val().length>0){$.ajax({type:"POST",url:"/api/home/register/namerecommend/1/",data:"emailaddress="+sEmail.val(),dataType:"json",success:function(msg){handleSuggestedProfileNames(msg,null);}});}else{handleSuggestedProfileNames("",null);}}}function populateProfileName(value){var profilename=document.getElementById(profileNameClientId);if(profilename!=null){profilename.value=value;}var namebox=document.getElementById("availableUserNames");if(namebox!=null){namebox.style.display="none";checkProfileValid();}var emailField=document.getElementById(emailClientId);if(emailField!=null){emailField.focus();}}function validate(){errors=null;var vFirstName="";var vLastName="";var vAoi="";if(fnameboxId.length>0){vFirstName=$("#"+fnameboxId).val();}if(lnameboxId.length>0){vLastName=$("#"+lnameboxId).val();}if(aoiClientId.length>0){vAoi=$("#"+aoiClientId).val();}if(vAoi.length==0){vAoi=siteId;}$.ajax({type:"POST",url:"/api/home/register/validation/1/",data:"firstname="+vFirstName+"&lastname="+vLastName+"&profilename="+$("#"+profileNameClientId).val()+"&email="+$("#"+emailClientId).val()+"&password="+$("#"+passwordClientId).val()+"&aoi="+vAoi+"&require_fullname="+requireFullName+"&recaptcha_challenge="+((useRecaptcha)?$("input#recaptcha_challenge_field").val():"")+"&recaptcha_response="+((useRecaptcha)?$("input#recaptcha_response_field").val():"")+"&provider="+provider+"&providerid="+providerId,dataType:"json",success:function(errors){handleValidation(errors,vFirstName,vLastName,vAoi);}});return true;}function focusFirstName(){var id=fnameboxId;if(id.length>0){$("#"+id).focus();}}function memberLinksBuilder(){var memberSlides=$("#memberSlideHolder > .memberSlide");if(memberSlides.length<=4){$("#memberSlideDisplay").append(memberSlides);}else{var indexes=new Array();while(indexes.length<4){var rand=parseInt(Math.random()*memberSlides.length);if(indexes.indexOf(rand)==-1){indexes.push(rand);}}for(i=0;i<indexes.length;i++){$("#memberSlideDisplay").append(memberSlides[indexes[i]]);}}}function discussionPaneHandler(action,subcommunityID){switch(action){case"showGroups":ajaxforgroupslist(subcommunityID);$("#topiclist").animate({marginLeft:"-670",},400,function(){});$("#dynaheader-backbutton").show();break;case"showTopics":$("#topiclist").animate({marginLeft:"0",},300,function(){$("#groupslist").html("");});break;}}function ajaxforgroupslist(subcommunityID){var url="/api/dynaheader/groupslist.aspx?subcommunityid="+subcommunityID;$.getJSON(url,function(data){if(data.length==1){window.location=data[0].URL;}$.each(data,function(i,gl){$("#groupslist").append("<a class='dynaheader-secondary' href='"+gl.URL+"'>"+gl.Title+"</a>");});});}function closeallpanels(){$(".dynaheader-panel").fadeOut("fast");$(".topic-panel").fadeOut("fast");$(".dynaheader-trigger").removeClass("dynaheader-tabbuttondropdownup");$(".dynaheader-triggersignin").removeClass("dynaheader-triggersigninup");$("#dynaheader-searchpanel").fadeOut("fast");$(".dynaheader-minipanel").fadeOut("fast");$(".dynaheader-profilepic").removeClass("dynaheader-profilepicup");$(".dynaheader-inboxbutton").removeClass("dynaheader-inboxbuttonup");$("#dynaheader-searchbutton").removeClass("dynaheader-triggersearchup");}$(document).ready(function(){$(".tile").hover(function(){$(".tileType",$(this)).show();},function(){$(".tileType",$(this)).hide();});var scrollednavstate="default";var searchHTML=$("#dynaheader-searchbox").html();memberLinksBuilder();function checkscrolling(){if(($(window).scrollTop()<62)||scrollednavstate=="fixed"){scrollednavstate="variable";}if($(window).scrollTop()>62){scrollednavstate="fixed";}}$(window).scroll(function(){closeallpanels();if(($(window).scrollTop()>72)||scrollednavstate!="default"){checkscrolling();}if(scrollednavstate=="fixed"){$(".dynaheader-navbar").addClass("dynaheader-fixednav");$(".dynaheader-home").addClass("dynaheader-homecollapsed");$("#dynaheader-searchbutton").show("fast");$("#dynaheader-searchpanel").html(searchHTML);$("#dynaheader-searchbox").empty();}if(scrollednavstate=="variable"){$(".dynaheader-home").removeClass("dynaheader-homecollapsed");$(".dynaheader-navbar").removeClass("dynaheader-fixednav");$("#dynaheader-searchbutton").hide("fast");$("#dynaheader-searchbox").html(searchHTML);$("#dynaheader-searchpanel").hide("fast");}});$(".topic-trigger").click(function(){if($(this).next().css("display")=="block"){$(".topic-panel").fadeOut("fast");}else{closeallpanels();$(".topic-panel").hide();$(this).next().fadeIn("fast");}});$(".dynaheader-trigger").click(function(){if($(this).next().css("display")=="block"){$(".dn-panel").fadeOut("fast");$(this).removeClass("dynaheader-tabbuttondropdownup");}else{closeallpanels();$(".dn-panel").hide();$(this).next().fadeIn("fast");$(this).addClass("dynaheader-tabbuttondropdownup");}});$(".dynaheader-profilepic").click(function(){if($(this).next().css("display")=="block"){$(".dn-panel").fadeOut("fast");$(this).removeClass("dynaheader-profilepicup");}else{closeallpanels();$(".dn-panel").hide();$(this).next().fadeIn("fast");$(this).addClass("dynaheader-profilepicup");}});$(".dynaheader-inboxbutton").click(function(){if($(this).next().css("display")=="block"){$(".dynaheader-minipanel").fadeOut("fast");$(this).removeClass("dynaheader-inboxbuttonup");}else{closeallpanels();$(".dynaheader-minipanel").fadeIn("fast");$(this).addClass("dynaheader-inboxbuttonup");}});$(".dynaheader-triggersearch").click(function(){if($(this).next().css("display")=="block"){$(".dn-panel").fadeOut("fast");$(this).next().fadeOut("fast");$(this).removeClass("dynaheader-triggersearchup");}else{closeallpanels();$(".dn-panel").hide();$(this).next().fadeIn("fast");$(this).addClass("dynaheader-triggersearchup");}});$(".dynaheader-triggersignin").click(function(){if($(this).next().css("display")=="block"){$(".dn-panel").fadeOut("fast");$(".dynaheader-triggersignin").removeClass("dynaheader-triggersigninup");}else{closeallpanels();$(".dn-panel").hide();$(this).next().fadeIn("fast");$(".dynaheader-triggersignin").addClass("dynaheader-triggersigninup");}});$("#dynaheader-signingpanel").click(function(){if($(this).next().css("display")=="block"){$(this).next().fadeOut("fast");}else{$(this).next().fadeIn("fast");}});$("body").click(function(){closeallpanels();});$(".dynaheader-triggersignin").click(function(e){e.stopPropagation();});$(".dynaheader-profilepic").click(function(e){e.stopPropagation();});$(".dynaheader-trigger").click(function(e){e.stopPropagation();});$(".dynaheader-triggersearch").click(function(e){e.stopPropagation();});$(".dynaheader-panel").click(function(e){e.stopPropagation();});$(".dynaheader-inboxbutton").click(function(e){e.stopPropagation();});});